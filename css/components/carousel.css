/* =========================================
   Proyectos · Carrusel puro CSS (sin JS)
   ========================================= */
.carousel {
  display: grid;
  gap: var(--space-3);
}

/* Viewport: recorta para garantizar 1 sola tarjeta visible. */
.carousel-viewport {
  overflow: hidden;
  border-radius: var(--radius-l);
}

/* Mecánica base solicitada: flex + scroll snap + smooth scroll. */
.carousel-track {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  gap: 0;

  /* Scrollbar oculta sin perder scroll táctil/teclado. */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Legacy Edge/IE */
  border-radius: var(--radius-l);
}

.carousel-track::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Soporte teclado: ring elegante al enfocar la pista. */
.carousel-track:focus-visible {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-focus) 26%, transparent);
}

.project-card {
  flex: 0 0 100%;
  scroll-snap-align: center;
  scroll-snap-stop: always;
  min-inline-size: 100%;

  transition: transform 180ms ease, box-shadow 180ms ease, border-color 180ms ease;
}

/* Microinteracción premium sin JS */
.project-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-s);
}

.project-card:target {
  border-color: color-mix(in srgb, var(--color-theme-primary) 45%, var(--color-theme-border));
  box-shadow: var(--shadow-m);
}

.carousel-dots {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.carousel-dot {
  inline-size: 0.85rem;
  block-size: 0.85rem;
  border-radius: 50%;
  border: 1px solid var(--color-theme-border);
  background: color-mix(in srgb, var(--color-theme-surface-alt) 78%, white 22%);
  box-shadow: inset 0 0 0 0 color-mix(in srgb, var(--color-theme-primary) 30%, transparent);
  text-decoration: none;
  transition: transform 150ms ease, background-color 150ms ease, box-shadow 150ms ease, border-color 150ms ease;
}

.carousel-dot:hover {
  transform: scale(1.08);
  border-color: color-mix(in srgb, var(--color-theme-primary) 40%, var(--color-theme-border));
}

.carousel-dot:active {
  transform: scale(0.96);
}

.carousel-dot:focus-visible {
  outline: 0;
  box-shadow:
    0 0 0 2px var(--color-theme-surface),
    0 0 0 4px color-mix(in srgb, var(--color-focus) 45%, transparent);
}

/* Estado por defecto: dot 1 activo si no hay hash #target. */
.carousel-dot[href="#p1"] {
  background: var(--color-theme-primary);
  border-color: var(--color-theme-primary);
}

/* Estado activo dinámico con :has() (fallback = dot 1). */
@supports selector(.carousel:has(#p2:target)) {
  .carousel:has(.project-card:target) .carousel-dot[href="#p1"] {
    background: color-mix(in srgb, var(--color-theme-surface-alt) 78%, white 22%);
    border-color: var(--color-theme-border);
  }

  .carousel:has(#p1:target) .carousel-dot[href="#p1"],
  .carousel:has(#p2:target) .carousel-dot[href="#p2"],
  .carousel:has(#p3:target) .carousel-dot[href="#p3"] {
    background: var(--color-theme-primary);
    border-color: var(--color-theme-primary);
    box-shadow: inset 0 0 0 2px color-mix(in srgb, #fff 85%, transparent);
  }
}


@media (prefers-reduced-motion: reduce) {
  .project-card,
  .carousel-dot {
    transition: none;
  }

  .project-card:hover,
  .carousel-dot:hover,
  .carousel-dot:active {
    transform: none;
  }
}
